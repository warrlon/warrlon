# 数据推送常见问题

**1.OneNET向第三方平台推送消息，一直出现您设置的数据推送已连续多次失败，即将达到平台上限，然后就会中断链接，这是什么情况？**

答：这种情况可能是应用与OneNET平台已断开连接，OneNET在没有收到应用确认的情况下，会一直推送数据，直到2000条才停止推送。
推送2000次，或者连续24小时都出现推送失败就会停用。
只要OneNET把数据post你的服务器接口地址，你没有在5秒返回200成功码即为失败。
假设A消息推送失败100次，即产生100次错误，在101次成功，会清除掉自己A累计的100次。 
建议收到数据先缓存，可利于redis或者 MQ等缓存技术，实现异步处理。

**2.第三方平台认证成功后，服务器推送的数据，在哪接收呢？**

答：配置第三方应用时配置的url，服务器向该url推送数据

**3.OneNET对接第三方平台只能http么？**

答：支持http或者https

**4.接收到平台推送的数据，需要返回什么？**

答：需要尽快（5秒内）给OneNET响应http请求的成功状态码（200）。

**5.如果推送没收到应用的回复，会一直推送吗？**

答：首先会重复推送，但是累积重复条数达到2000次或者连续24小时平台会主动停掉推送功能。

**6.在第三方开发平台配置URL的时候总是校验token失败怎么办？**

答：在提交验证时采用get方法传三个参数nonce、msg、signature，返回结果没有正确返回msg的值，比如在msg值中多返回其他符号，都会验证失败。

**7.请问HTTP推送的URL是怎么配置验证的？**

答：官网开发文档里有详细说明，第三方服务端要返回msg。
用户在配置页面完成配置并点击“提交”时，OneNET平台会向填写URL地址发送HTTP GET请求进行URL验证，请求形式示例如下：
http://url?msg=xxx&nonce=xxx&signature=xxx
其中，url为用户在页面配置时填写的URL，nonce、msg、signature用于URL及token的验证
token验证过程如下：
将配置页面中配置的token与nonce、msg的值计算MD5，并且编码为Base64字符串值
将上一步中Base64字符串值通过URL Decode计算后的值与请求参数signature的值进行对比，如果相等则表示token验证成功。
如果token验证成功，返回msg参数值，表示URL验证通过。
如果用户不想验证token，可以选择跳过MD5计算过程，直接返回msg参数值。

**8.OneNET的HTTP推送有免费数量限制吗？**

答：HTTP推送免费，没有数量限制。

**9.推送内容里AT是OneNET平台推送命令时候的时间吗？**

答：是数据到到平台的时间。

**10.添加全局推送时提示可以输入http或https形式的URL，但如果是https形式，后续也没提示需要上传证书，为什么？**

答：数据推送，OneNET相当于客户端，HTTPS推送，是你的服务器支持别人https访问你的接口即可。

**11.请问添加群组推送的时候会进行URL验证吗？我是不是需要在服务器配置进行验证并返回，这样才能添加群组推送成功？**

答：你第一次配置推动地址的时候验证一次就行了，后续不用再验证URL可用性。具体可以参考官网HTTP推送的文档： [https://open.iot.10086.cn/doc/book/application-develop/httppush/introduce.html](https://note.youdao.com/)。

**12.请问OneNET的http推送post的数据没有csrf验证怎么弄，可以设置吗？**

答：只有关闭csrf的token验证。

**13.OneNET平台HTTP推送服务推送消息延时大？**

答：首先配置推送时，推送时间间隔设置越小，延时越小；另外若对消息延时要求较高，建议使用消息队列MQ。
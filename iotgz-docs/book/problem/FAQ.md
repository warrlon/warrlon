# 常见问题

# 技术类

**1.电信联通的物联网卡可以连接OneNET平台么？**

答：可以，除电信的NB卡只能连接OC平台，其余物联网卡都可以的。

**2.触发器的邮箱可以修改么？**

答：触发器邮箱只能是注册时绑定的邮箱，如若想更换邮箱可点击安全设置>邮箱换绑

![pic1](/images/faq/1技术类/1.png)

**3.平台的数据流可以删除么？如何删除？**

答：数据流现在可以删除，开发者中心>数据流模板>操作>删除按钮

![pic2](/images/faq/1技术类/2.png)

**4.平台的数据可以导出、删除、修改和分析处理么？如何实现？**

答：目前平台提供API供用户进行数据/设备管理，详情请见[API列表](/book/application-develop/api/api-list.md)

**5.如何查看在平台发送的命令是否成功？**

答：如果在应用调用的API指令成功后，OneNET平台会返回执行结果。

**6.能否将多个设备的数据流放在同一应用中？**

答：独立应用可以，一个独立应用中可以有多个应用元件，不同元件可以对应不同的设备数据流

![pic3](/images/faq/1技术类/3.jpg)

**7.平台上设备删除后可以恢复么？怎么恢复？**

答：平台设备删除后，不能恢复 

**8.设备ID可以用户自己设置么？还是OneNET自动生成？**

答：设备ID 都是由平台自动生成的

**9.OneNET向第三方平台推送消息，一直出现您设置的数据推送已连续多次失败，即将达到平台上限，然后就会中断链接，这是什么情况？**

答：这种情况可能是应用与OneNET平台已断开连接，OneNET在没有收到应用确认的情况下，会一直推送数据，直到2000条才停止推送。
推送2000次，或者连续24小时都出现推送失败就会停用。
只要OneNET把数据post你的服务器接口地址，你没有在5秒返回200成功码即为失败。
假设A消息推送失败100次，即产生100次错误，在101次成功，会清除掉自己A累计的100次。 
建议收到数据先缓存，可利于redis或者 MQ等缓存技术，实现异步处理。

**10.创建产品是不是只能指定一种接入协议？**

答：用户根据应用场景选择一种协议，一个设备只能按照一种协议与平台交互

**11.一个产品下面可以创建多少设备？**

答：一个产品下可以创建多个设备，根据实名认证的不同类型，有不同的限制，详见[账号与登录](/book/easy-manual/login.md)

**12.一个设备下面可以添加多少数据流？**

答：一个设备下可以创建多个数据流，目前平台不限制数量

**13.OneNET的数据能保存多长时间？容量是多大？**

答：OneNET平台数据保存时间为一年，容量不限

**14.请问一个数据流可以传送两种及两种以上的不同数据么？**

答：不可以，建议创建两个不同的数据流

**15.为什么上传到OneNET的数据一会儿是图一会儿是点？**

答：上传到平台的数据都是以数据点的形式上传，平台不支持图片展示功能

**16.独立应用和模板应用的区别，如何使用模板应用？**

答：
独立应用：独立应用中包含的数据信息可以同时取自多个设备。应用是唯一的，无法复用在其他设备上。<br/>
模板应用：模板应用中包含的数据信息仅能来自单一设备，每个设备都能够套用该模板。通过设备来启用模板应用时，模板应用里显示的数据均来自该设备。而要套用该模板的设备必须拥有模板中所要求的所有数据流。<br/>

**17.如何将模板应用转化成独立应用？**

答：模板应用不能转化成独立应用

**18.OneNET可以批量添加/删除设备吗？**

答：平台提供批量添加删除设备的API，正确调用API可以实现批量添加和删除

**19.OneNET怎么下发数据给设备？**

答：平台向设备发送数据使用不同协议有不同的发送方式，详细方式见使用协议接入文档

**20.OneNET用http不可以传输视频么？**

答：目前不支持

**21.OneNET怎么实现判断设备是否在线吗？**

答：产品页面设备名称前指示灯显示绿色为设备在线，当显示灰色时为设备离线

**22.NB产品下IMEI号删除之后显示已重复，不能添加设备？**

答：模组上带的IMEI号只能绑定在唯一的平台设备上，平台不支持重复添加。遇到此问题，建议用户先删除已有设备，若非自己添加，请联系模组提供方删除设备或者更换模组，也可提交申诉

**23.第三方平台认证成功后，服务器推送的数据，在哪接收呢？**

答：配置第三方应用时配置的url，服务器向该url推送数据

**24.第三方平台的数据推送失败后，OneNET可以实现手工触发推送吗？**

答：可以

**25.OneNET对接第三方平台只能http么？**

答：支持http或者https

**26.前手机号码丢失如何完成改绑？**

答：可以在安全设置中改绑手机号码，如果前手机号码已注销或丢失，可通过邮箱验证和实名认证验证两种方法进行换绑

**27.OneNET_config_v1.2.exe 如何使用？**

答：OneNET_config_v1.2.exe是注册码生成工具，在cmd中输入工具所在路径，并按要求填写各个参数运行即可

**28.触发器如果达到设定值的时候会给邮箱发信息，但是会一直发送，怎么才让它只发一次？**

答：在创建触发器时触发条件选择为inout方式时，数据流首次进出区间触发器响应一次，保持在区间不会持续响应，不同触发方式的不同点可参考应用接入文档中触发器api章节

**29.OneNET平台的个人账号和企业账号都是什么功能，有什么区别？**

答：目前用户认证功能已上线，个人账号与企业账号在功能上有部分差异，企业账号享有更多权限，如果通过了个人认证，可再次升级进行企业认证。具体内容详见[账号与登录](/book/easy-manual/login.md)

**30.企业账户申请流程（企业认证流程）？**

答：认证功能上线之后，已经取消了企业账户的注册入口，如想完成企业注册，即可先进行平台用户注册>登录>个人资料>企业认证

**31.在应用编辑器里如何能够根据数据流改变显示的图片？**

答：将图片进行上传后，在图片下方填入相应数据流的值，当有对应数据值进行上传，就会切换到对应的图片。

**32.产品创建完成之后，可以修改通信协议么？**

答：不可以修改的，如果能修改了，那么产品下面的设备鉴权信息和方式会发生变化，会造成混乱。

**33.在OneNET平台创建添加设备以后，设备能够上线，但是平台显示设备“该设备不支持发现资源”，这个是怎么回事？**

答：LwM2M协议设备登录OneNET平台，首先需要在订阅Object组和订阅Resource参数，参考使用模组的AT指令先后步骤来完成登录前的配置。

**34.OneNET 离线设备如何重新登录？**

答：设备离线后，重新登录和初次登录步骤相同。如果为保证设备不出现掉线，及时发送心跳包。LwM2M协议的设备及时发送AT+MIPLUPDAT指令。

**35.服务器配置自动停用是什么原因？**

答：第三方服务器推送停用主要有两种原因：一是24小时之内出现连续推送失败的记录，二是某一条消息因为推送不过去导致连续失败2000次。
只要OneNET把数据post你的服务器接口地址，你没有在5秒返回200成功码即为失败。
假设A消息推送失败100次，即产生100次错误，在101次成功，会清除掉自己A累计的100次。 
建议收到数据先缓存，可利于redis或者 MQ等缓存技术，实现异步处理。

**36.FOTA设备列表里没有设备，如何添加？**

答：FOTA新建群组选择模组型号的时候，必须与你的设备的模组型号对应，这样FOTA设备列表里就会有设备。需要模组型号支持才会显示设备，然后进行添加。

**37.设备注册和设备添加有什么区别？**

答：设备添加通过产品的Api-key进行新增，设备注册通过产品的正式环境注册码Register-code进行新增。两者取得的效果都是新增设备。

**38.在应用里，一个地图可以显示多个设备位置么？**

答：不可以，不支持多个坐标显示，地图控件只能选择一个数据流，也就是一个点坐标。

**39.订阅主题数量有限制么？一个产品下面可发多少topic?一个设备最多能订阅多少个主题?**

答：有限制的，一个MQTT产品下面最多能支持100个自定义topic，一个设备最多能订阅50个主题。

**40.离线命令的超时时间如何设置？**

答：设置timeout参数，命令有效时间，默认0。0：在线命令，若设备在线，下发给设备，若设备离线，直接丢弃。>0： 离线命令，若设备在线，下发给设备；若设备离线，在当前时间加timeout时间内为有效期，有效期内，若设备上线，则下发给设备。单位：秒。有效范围：0~2678400。

**41.OneNET可以在应用管理里面滑动查看历史的数据曲线吗？**

答：不可以，数据曲线目前只能展示最新的数据点的值。

**42.设备管理中的正式环境注册码是怎么用的?**

答：在调用注册设备的api会使用到注册码进行设备注册。

**43.TCP透传如何查询设备历史数据？**

答：通过查询设备历史数据的API接口获得设备历史数据。

**44.OneNET的地图如何使用？**

答：从基站获取参数，往平台特殊指定数据流上报信息，详见[位置服务](/book/other-service/onenet-lbs/introduce.md)

**45.接收到平台推送的数据，需要返回什么？**

答：需要在5秒内给OneNET响应http请求的成功状态码。

**46.创建的产品或者设备不小心删除了，还能恢复么？**

答：不能。

**47.如果设备断网，OneNET多久才发现设备掉线？**

答：会等到保活时间lifetime到期后，OneNET才发现设备掉线。

**48.透传模式下，Ａ设备怎样传数据到Ｂ设备？**

答：设备之前的通信建议使用mqtt协议来实现。A设备发布主题，B设备订阅该主题。

**49.下发命令时没有提示参数错误，为什么读缓存命令执行情况时提示，执行状态是：请求参数错误?**

答：这个错误一般是资源类型和参数中的类型不一致导致的，这个只能在执行中才会判断。

**50.如果推送没收到应用的回复，会一直推送吗？**

答：首先会重复推送，但是累积重复条数达到2000次或者连续24小时会停掉推送功能。

**51.自定义resid有什么要求吗？**

答：流程跟正常一样，差别就是自定义object,instance和resource的ID，只要不与OMA定义的重合就可以。

**52.在第三方开发平台配置URL的时候总是校验token失败怎么办？**

答：在提交验证时采用get方法传三个参数nonce、msg、signature，返回结果没有正确返回msg的值，比如在msg值中多返回其他符号，都会验证失败。

**53.OneNET平台下发的命令该如何切割？**

答：分块传输。API下发命令最大2kb，然后分块最大是512字节。

**54.API里有根据MasterKey获取产品ID的方法吗？**

答：产品ID目前没有相关API可以使用，其他API详见开发文档应用开发。

**55.OneNET上每个设备的缓存命令可以有多少条？**

答：NB的设备目前最多缓存10条，其他设备没有限制。

**56.超过注册的存活时间会怎么样？**

答：设备会从OneNET平台离线。

**57.写设备资源和命令下发，有什么区别吗？**

答：写和执行均可对设备进行命令操作，执行只支持字符串下发，写的类型支持更多。

**58.即时命令和缓存命令有什么区别？**

答：下发即时命令需要设备在线且下行端口没有老化的时候才能抵达设备，缓存命令可以在设备离线的时候下发，等待有上行数据的时候抵达设备。<br/>
即时命令：三方平台下发命令到OneNET，OneNET立即将命令下发给设备。<br/>
缓存命令：三方平台下发命令到OneNET，设置好触发下行的条件，OneNET先把命令保存起来，等满足了条件再下发给设备。两种命令设备都需要回复到平台，平台拿到结果会立即转发给三方平台。<br/>

**59.数据能发送到OneNET但是平台上显示离线，是什么原因？**

答：这种情况应该是http协议连接的平台，因为http是短连接的，设备不会显示在线，但是能往OneNET平台POST数据。

**60.目前NB的模组有支持GPS定位的吗？**

答：模组本身是不支持的，可以外接GPS传感器实现。

**61.和物可以直接通过2G物联网卡连接自己的DTU-modbus吗？**

答：可以

**62.TIME_OUT OneNET返回给服务器这个是什么错误？**

答：TIME_OUT 是因为平台没有在超时时间内（25秒）收到设备的响应，有几种可能：

1）网络连接session被核心网回收，NB-IOT 设备通过核心网连接到平台，如果设备在一段时间内（各地情况不一，通常为几分钟）没有上行和下行的活动，核心网会回收连接，此时平台下发的消息无法到达设备

2）网络问题，NB-IOT 的网络不稳定，尽管CoAP 有重传机制，仍然有可能在25秒内无法完成平台到设备的请求响应的全过程。

**63.Fixed header里，Remaing length是什么？**

答：后面总长度字节。

**64.解压后的代码文件中文乱码，怎么解决？**

答：改字体，UTF-8最好。

**65.创建设备时提示 invalid parameter: auth_info**

答：imei是无效的，需要填写正确的imei。

**66.在官方例程程序的哪个部分可以改我配置的wifi和密码？**

答：WIFI_info。

**67.设备上报数据到平台的地址是什么?**

答：每个协议接入的IP加端口不一样，详情参考[平台地址](https://open.iot.10086.cn/doc/book/problem/platformaddress.html)。

**68.有线网络走mqtt数据协议格式可以吗，用lwip？**

答：可以的，那就用lwipIP里面的socket接口去对接OneNET就可以了。

**69.OneNET上是不是没有建立数据库的权限？只能与第三方服务器进行对接？**

答：是的。

**70.一个群组里面关联的设备有限制吗？一个账户可以设置群数有限制吗？**

答：都没有。

**71.WiFi设置AP模式，可以往里面写指定WiFi账号密码让它连接吗？**

答：应该是不能直接串口写入的，请参考8266AT指令集。

**72.移动平台设备保活时间lifetime是多久？这个决定哪些参数？**

答：平台最大支持2的31次方减1秒。这个参数一般可以通过AT+MIPLOPEN或者AT+MIPLUPDATE改变他的值。

**73.应用侧有群发命令给所有设备的API吗？**

答：目前MQTT协议可以变相去实现这个功能，一个产品下MQTT的设备可以订阅相同的topic，达到发布一个topic，订阅了该topic的设备都能收到。

**74.AT+MIPLNOTIFY怎么一次传输多个整数？**

答：目前MQTT协议可以变相去实现这个功能，一个产品下MQTT的设备可以订阅相同的topic，达到发布一个topic，订阅了该topic的设备都能收到。

**75.我在服务端下发一下close命令，客户端收命令后关机，但重启后还是收到了 CLOSE命令。这是什么问题?<br>mqtt svrpublish $creq/c457c6f7-7c14-5314-9148-3294abe48687 nil close**

答：和qos有关，0：最多发送一次，不关心设备是否响应
1：至少发送一次，如果设备收到命令后没有应答，则会在下一次设备登录时若命令在有效期内（有效期定义参见timeout参数）则会重发该命令。

**76.OneNET开发文档中注册与新增的区别是什么？**

答：新增设备是通过masterkey作为验证；而masterkey的权限很高。如果不想把masterkey给出去，就用注册的方式，只给注册码即可验证，注册码只能用于注册，权限较低。 该功能针对于一个产品下有多个设备供应商的情况，给设备供应商注册码即可，不用给masterkey。

**77.请问OneNET平台测试的时间最快多长时间，1s一次可能吗？**

答：每秒一次，可以。但NB通讯协议不支持那么高频率，一般要求5秒以上间隔。

**78.AUTH_INFO 填什么？**

答：鉴权信息，创建设备时自定义的。现在一般不填，模组还没有适配这个字段。

**79.利用js或者ajax可以接入OneNET吗？**

答：两个都行，有个后端的nodejs的sdk 也有适用ajax的c#。

**80.我需要一个上传数据和云端控制的功能，应该选择什么协议？**

答：MQTT、EDP。

**81. 设备在线要用哪个协议？**

答：MQTT、EDP、LwM2M、TCP。

**82.OneNET平台支不支持私网通道？**

答：不支持。

**83.用EDP协议，数据可以正常上传，但设备不显示在线。**

答：用debugger登录即可。

**84.用Onenet平台的LwM2M协议要不要定期给平台发送心跳包？**

答：不用，lifetime里面可以随时发notify上报数据。

**85.用MQTT协议上传数据在平台上不显示，提示是上传成功的。**

答：只能往topic为$dp的数据流发，OneNET才以数据流的形式展示出来，详见MQTT协议文档。

**86.请问http推送的URL是怎么配置验证的？**

答：官网开发文档里有详细说明，第三方服务端要返回msg。
用户在配置页面完成配置并点击“提交”时，OneNET平台会向填写URL地址发送HTTP GET请求进行URL验证，请求形式示例如下：
http://url?msg=xxx&nonce=xxx&signature=xxx
其中，url为用户在页面配置时填写的URL，nonce、msg、signature用于URL及token的验证
token验证过程如下：
将配置页面中配置的token与nonce、msg的值计算MD5，并且编码为Base64字符串值
将上一步中Base64字符串值通过URL Decode计算后的值与请求参数signature的值进行对比，如果相等则表示token验证成功。
如果token验证成功，返回msg参数值，表示URL验证通过。
如果用户不想验证token，可以选择跳过MD5计算过程，直接返回msg参数值。

**87.NB-IoT怎么上报GPS数据？**
答：NB支持上报gps的资源
NB轻应用地图使用如下两个资源（任选一个）上传经纬度：
1.object id为6，resource id：0（纬度），1（经度）。
2.object id为3336，resource id：5513（纬度），5514（经度）。
在地图中选择对应设备中名为“location”的数据流即可。
使用模组M5310-A，资源3336上传经纬度举例：
AT+MIPLADDOBJ=0,3336,1,"1",0,1
AT+MIPLDISCOVERRSP=0,3336,1,9,"5513;5514"
AT+MIPLNOTIFY=0,0,3336,0,5513,1,13,"100.6474940698",0,1,21
AT+MIPLNOTIFY=0,0,3336,0,5514,1,14,"20.5371754772",0,0,22。

**88.开发板存在wifi连接不上的问题，代码上传成功，但就是连接不上？**

答：设备端调用检查检测任务的api接口就可以了。

**89.SOTA升级有没有设备类型限制？**

答：没有。能和OneNET通讯，就可以做SOTA升级。

**90.NB-IoT连接OneNET后，是一直保持连接呢？还是说过一段时间发送一个心跳包？每次都要进行设备鉴权？**

答：NB设备有生命周期的设置。生命周期内设备在线。设备需要更新生命周期。生命周期可以设置的很长，大于一天。
不需要每次都鉴权。

**91.MQTT有没有遗嘱消息？**

答：有的。

**92.有人用过应用里的轨迹控件么？怎么在应用中显示GPS轨迹？**

答：暂不支持经纬度数据流，该组件只能使用基站定位，需要设备上有基站定位信息才行。

**93.触发条件如果是inout需要两个阈值怎么传参数呢？**

答：type 为 inout 时，threshold 设置为{"lolmt":40, "uplmt":52}， 表示
数据流的值首次进入或离开闭区间[40,52]时触发。

**94.OneNET是否支持websocket方式的MQTT协议接入？**

答：目前不支持

**95.MQTT的一个客户端可以同时订阅多个topic吗？**

答：可以。

**96.NB模组收到缓存消息后,OneNET会回复应用服务器什么消息吗？**

答：设备回什么，是你用的模组决定的，看模组at指令手册，或者问模组产商技术支持。

**97.M5310只是一个通道，还是集成了LwM2M协议？M5310模组和OneNET平台是coap协议还是LwM2MoverCoap？**

答：5310是集成协议的LwM2MoverCoap的。

**98.OneNET平台MQTT第一包数据是publish，不会主动断开套接字吗？**

答：MQTT长连接的，只要你发的数据合法都不会断。

**99. OneNET好多对象的属性(尤其是string类型)的，不识别，显示出都是opaque类型，仅有5750,5751可识别为"string"类型。**

答：按ipso文档来的就有，如果不按文档，OneNET会把数据当成opaque方式存储和展示。

**100.OneNET平台现在支持文件下发吗？**

答：可以的，得根据设备端接入协议来看，有下发文件的接口。

**101.请问什么是保活时间？**

答：不用发心跳也不会断开连接的一个时间。

**102.请问在线调试出现这种情况是什么问题？"msg":"内部服务器数据解析失败，请稍后再试"**

答：建议使用postman，可能是在线调试工具的问题。

**103.平台显示设备在线，但是设备列表里的对象数量是0，正常吗？**

答：没有发现资源，重新走一下订阅和发现俩步骤。

**104.tcp透传怎样接收到字符类型的数据？**

答：改lua脚本。

**105.IMEI和IMSI怎么获取？**

答：获取imsi:at+cimi，获取imei:at+cgsn=1

**106.NB-IoT支持服务器主动控制指令吗？**

答：支持的，api接口下行读写执行都是服务器主动控制设备的命令。

**107.设备显示离线是什么问题？（http协议）**

答：http协议就显示离线，数据正常上报没问题，因为http短连接。要显示在线状态请换tcp或者mqtt协议。

**108.平台上的新增APIKEY功能有什么用？**

答：是一个全新分发。如果你只想某个客户访问特定设备的数据或者进行控制的时候，就给他设备级别的apikey防止对你其他设备进行越权控制。

**109.MQTT标准的数据流格式是什么？**

答：MQTT有7种数据流格式，详见mqtt开发文档。

**110.OneNET里如何删除数据点？**

答：数据点已经上传了，就在OneNET的数据库里面，是不能随意删除的。

**111.请问M5310A可以改变波特率吗？**

答：可以改波特率，重启后会保持一段9600的波特率，然后才切换到设置的波特率。

**112.遇到HardFault_Handler怎么办？**

答：在HardFault_Handler加入while(1);并打个断点，看是从哪进去的。

**113.怎么在APP上显示上传到OneNET的图片？**

答：图片是二进制的文件格式，api拉取文件后，做格式转换。

**114.调用API老是返回auth failed，为什么？**

答：设备的编号（LwM2M协议的imei和apikey不对应，其他协议是devid和apikey不对应造成的）。

**115.应用开发环境用的是什么语言？**

答：typescript。

**116.怎么批量添加设备呢？这个是有后台来做还是开发设备的人来添加？**

答：NB的设备可以批量模组导入imei。EDP或者MQTT可以设备侧调用注册设备的API来完成。

**117.fota可以串口指令升级吗？**

答：可以。

**118.没有进入封包程序里面，直接到了else是什么问题呢？**

答：内存分配失败。

**119.请问订阅失败是什么原因？怎么解决？**

答：1.少发了ADDOBJ那条指令；2.对应平台下发的+MIPLOBSERVE没有响应。

**120.使用EDP协议会掉线吗？有没有防掉线的一些步骤的？**

答：EDP协议基于TCP的，想要不断开掉线，是需要发报文维持连接的，可以发数据，可以发心跳。

**121.OneNET的lifetime的生存周期，超过了这个时间，被平台踢下线了，我要上报数据，是要重新发起注册还是怎么来？**

答：重新发起。一般在生命周期过期之前去updata更新下。

**122.OneNET平台NB下发指令是字符串类型吗？**

答：可以，用执行execute的接口，下发字符串。

**123.OneNET的HTTP推送有免费数量限制吗？**

答：HTTP推送免费，没有数量限制。

**124.在设备列表里，显示设备状态为离线，激活状态为—未激活。这个未激活，该怎么理解呢？**

答：创建了实际从未登录过就是未激活，实际设备连接一次之后就激活了。

**125.OneNET最大一帧支持多少数据？**

答：二进制文件上传最大800K。

**126.OneNET api调用次数有限制吗？**

答：总次数没限制，但每秒调用频次限制在300次/秒。

**127.触发器中的邮箱提醒一天有次数限制吗？**

答：有，20次。

**128.OneNET可以做到定时提醒功能吗？**

答：和物可以。[https://open.iot.10086.cn/productservice/zyhewu/](https://open.iot.10086.cn/productservice/zyhewu/)

**129.HeartBeat TimeOut: 0 请问一下 串口输出这个这个是什么意思？**

答：发送的心跳没有被检测到。

**130.平台显示设备在线，串口发送AT+MIPLNOTIFY=0,3303,0,5700,"29.2",1也成功了，但是设备列表里的对象数量是0，看不到自己发送的数据，是怎么回事？**

答：没有发现资源，重新走一下订阅和发现俩步骤。

**131.TCP透传方式有没办法确切知道DTU是否执行命令成功，现在OneNET只是知道命令有没发送到DTU。**

答：只能通过你执行过后上报一个执行状态的数据流，来完成反馈。因为透传的命令本身不支持反馈。

**132.有没有模块支持NB-IoT和GSM一起的？**

答：中移的M5313。

**133.NB-IoT协议创建设备的时候，正式设备和测试设备有什么区别？**

答：测试设备是模拟的，正式设备是真实的nb模块。测试设备IMEI可以随便写 正式设备会验证IMEI。

**134.EDP协议是不是只能向OneNET上面传数字，字符能传吗？**

答：都可以。字符和数字都是最后传输的二进制码流。

**135.可以自己写个windows客户端从OneNET上读取数据吗？**

答：可以。OneNET有api接口。

**136.TCP发送数据超时时间一般设置多少合适呢？**

答：2秒足够。2g网络的话，信号不好可能会比较长时间，搞不清楚设置个3到5秒，再超时就当错误处理。

**137.如果想要设备保持长连接，notify应该多久同步一次？**

答：网络侧最多保活2分钟。为了稳当，你要一分钟上报一次数据。或者去找运营商，开通GRE专用APN。通用APN会存在2分钟左右端口老化的问题，所以达不到实时控制。故引入了专用GRE APN，以延迟端口老化的时间。

**138.如何开通GRE专用APN？**

答：1.可通过各省公司客户经理申请开卡，OneNET专用APN为CMNBIOTOneNET。
2.完成开卡后终端侧连接模式为接入机模式（模组-b参数为0），地址为192.168.24.100：5683，门户地址为重庆主平台：[https://open.iot.10086.cn](https://open.iot.10086.cn)。
3.关闭PSM，eDRX即可。

**139.OneNET设备在线后没发数据多久会掉线？**

答：平台显示在线只跟你设置的生命周期有关，就是open后面的那个参数。除非你主动注销登录或者生命周期到了，才会显示离线。没有设置就是默认86400秒，一天。

**140.BC_25模组，设备开启自动订阅后，收不到discover请求。**

答：移远的模组要手动先回AT+MIPLOBSERVE= 然后平台才会发DISCOVER。

**141.MQTT Simulate Device是什么软件，起什么作用？**

答：MQTT设备模拟器。

**142.推送内容里AT是OneNET平台推送命令时候的时间吗？**

答：是数据到到平台的时间。

**143.设备订阅功能是什么意思？**

答：LMW2M协议的订阅是上报数据点NOTIFY的前提，只有订阅了才可以上报数据。

**144.添加全局推送时提示可以输入http或https形式的URL，但如果是https形式，后续也没提示需要上传证书，为什么？**

答：数据推送，OneNET相当于客户端，HTTPS推送，是你的服务器支持别人https访问你的接口即可。

**145.是不是NB可以实现定位了？**

答：OneNET LBS基站定位覆盖三网基站信息，2G/3G/4G均可实现基站定位，NB不能基站定位，只能加gps芯片。

**146.怎么用API调用OneNET数据到web？**

答：可以用数据推送，详见[https://open.iot.10086.cn/doc/book/application-develop/httppush/introduce.html](https://open.iot.10086.cn/doc/book/application-develop/httppush/introduce.html)。

**147.OneNET怎么接入树莓派？**

答：用c语言libcurl或者用python。先选定构架，mcu型号，在根据设备使用性质决定用什么协议，长连接用MQTT,EDP传感器低功率用LwM2M。

**148.LoRa节点或网关有办法接入OneNET平台吗？**

答：原则上只要能连广域网，都可以连OneNET平台。比如：网关可以通过MQTT协议连OneNET。OneNET和局域网通信方式无关。你用LoRa，蓝牙，都没关系。但是你的LoRa节点要能通过TCP ip连广域网。或者你的LoRa节点组局域网和你的网关通信，网关在和OneNET通信。

**149.write和execute指令有什么区别？**

答：execute只能发字符串，write可以发多种格式数据。

**150.LwM2M自定义对象资源如何定义？**

答：资源规范定义了OBJ_ID,RESOURCE_ID。然后每个对象资源是有相应的数据类型，举个例子，如果你想上传16进制的数据，可以选择3200-0-5505。

**151.模组侧MQTT订阅提示是成功为什么平台上看不到？**

答：给$dp这个topic发数据，平台才展示。产品下的设备，A订阅topic aabbcc，B往aabbcc这个topic发数据，A设备能收到数据。但是如果A、B设备想上报数据，给平台展示，需要往我们平台定义好的topic $dp上报数据。

**152.连接平台的时候header头部如何加进去？**

答：用okhttp

**153.编译提示“file has been changed outside the editor,reload”是怎么回事？**

答：你打开了map文件，每次编译map文件都有更新的。

**154.应用编辑器里的button控件是怎么去控制单片机的引脚的？**

答：通过命令下发的方式。每一个button都需要绑定一条数据流，当你在操作界面点击button的时候，控制信息会通过网络模组下发到单片机的串口，然后你需要用单片机进行串口数据解析，再根据解析出来的控制信息，做出相应的引脚控制。

**155.数据流单位和符号是随便填的么？跟设备里面DATA_TYPE上传数据类型有关么？**

答：可以随便填。

**156.多个应用同时生成token，除了et参数之外，其他参数都一样，生成的多个token是否可以同时使用的？会不会使用了一个token，其他的token就会失效？**

答：可以同时使用。MQ支持集群消息，所以这问题肯定会都支持的。

**157.Bootstrap server是什么？**

答：bootstarp是一种常用的技术手段，是一个接入引导机制，就是给你分服务器资源的。重庆主平台分为引导机和接入机模式两种。引导机分配一个接入机地址，两种方式效果是一样的。

**158.PSM和edrx有什么区别？**

答：edrx就是介于psm和active之间的一种模式，设备相当于间歇性工作，省电模式较完全睡眠的psm会功耗高一点，在睡眠的这段时间设备无法收到下行数据，但是到了设备寻呼时间窗又可以收到数据，只是会延迟，延迟的时间就是edrx模式下睡眠的这段时间，这个应该是可以自己设置的时间，寻呼窗时间一过，设备又进入睡眠，如此循环下去。

**159.OneNET能不能直接当一个mqtt服务器使用，JAVA像访问普通mqtt服务器一样访问OneNET？**

答：可以。java代码只要向访问mqtt服务器那样访问就行了，密码apikey，用户名产品id。

**160.OneNET有没有收到模组消息后自动应答确认的机制？发送了notify或xxxxrsp后，怎么确认OneNET收到了，然后判断是否要重发？**

答：上报数据的AT指令NOTIFY有可选参数ackid，带这个参数上报，平台会回复。

**161.我想用自己的前端获取OneNET的设备数据，生成曲线之类的，是只能通过API？**

答：只能api。

**162.OneNET平台采用设备自主创建的方式，一个设备可以多次重复注册吗？重复注册产生的设备ID是相同的还是随机的？**

答：公开协议的产品，只要sn或者mac相同，要么得到的devid和apikey就是相同的，也就是可以重复注册。

**163.用postman调试api时，设置的有起始时间，但是返回的参数还是只有默认的100。**

答：要设置limit参数，指定数据条数， 默认100，limit最大设置为6000，需要指定一下limit参数。

**164.请教一下OneNET可以获取网络时间吗？我的单片机希望通过6312获取网络上的时间。**

答：直接去ntp服务器拉时间，开发板例程有，参考下。

**165.OneNET LBS位置服务的精度大概是多少？**

答：50-200。

**166.为什么资源列表都是空的，例程代码都创建了？**

答：平台侧有个自动发现资源的按钮，默认是关闭的打开一下，可能是这个原因。

**167.提示"vaildate fail:vaildate token fail"应该怎么处理？**

![image](http://upfiles.heclouds.com/forum-app/2019/09/09/b5bfcdaaf4088c484382018c10e3e53e.jpg)

答：这种情况是需要你们服务器给返回，校验是一个动作。（回答需完善）当你点提交的时候，其实是产生了一个get请求，你的url会收到三个参数，你需要原封不动的返回msg的值，不要带任何符号，很多请求返回的信息带了引号。可以参考下图。![image](http://upfiles.heclouds.com/forum-app/2019/09/09/a97996c5d170f14efaecc79ee3758cb3.png)

**168.LwM2M连OneNET可以不用资源号，直接传hex吗？**

答：不行。

**169.如果observe和discover没有及时回复，是不是只能close掉reg之后重新open？**

答：你需要看资源列表就要重来一次，不看只资源列表的话，可以进行数据上报，命令下发。区别仅仅是有没有资源列表。不影响其他功能。

**170.OneNET上配置的推送数据链接跟鉴权链接是同一个链接么？**

答：是的，设置填完后会验证，验证过了会推送。

**171.调用api缓存下发，如果有多个write消息，平台多长时间下发一次，是不是收到了上次的rsp就下发？**

答：设备上报完数据就下发。

**172.引导机跟接入机是什么意思？**

答：接入机是你的数据实际上传到的服务器地址，引导机可以根据你的所在区域等因素给你一个接入机地址，让你获得更好的网络体验。

**173.设备在线且订阅成功，但打开下图的资源列表，却什么也没有，请问是什么问题？**

答：请排查以下4个方面：创建设备的时候订阅打开；设备列表自动发现资源打开；设备回复平台下发的订阅发现不成功；设备模组侧添加资源对象不成功。

**174.是不是只有ipso的obj_id平台才会识别出来这个obj的读写属性，其余的，非ipso的都识别不出来，想要读、写，必须调用api？**

答：是的。

**175.为什么我从平台把数据导出之后打开表格，它总是提示文件损坏？**

答：右击，属性，解除锁定。

**176.消息列队的MQ_ID在哪里查看？**

答：就是MQ的实例名称。

**177.请问第三方应用接入OneNET大概是怎样的一个顺序 ，目前已经在开发这平台注册账号、添加了产品、注册了设备。**

答：接下来你需要将在平台上注册的信息跟你现有的设备相对应：根据你注册的相关信息，参考开发文档不同协议对于的服务器端口地址、相关上传规则、产品ID等信息与设备绑定，然后在上传OneNET就可以在平台上看见你上传的信息了。

**178.使用的是移动的卡，下图这里需要填写什么？**

![image](http://upfiles.heclouds.com/forum-app/2019/09/10/0ce69bc97a2f678af081acf4cb14d80b.png)**

答：AT+CGDCONT=1,"IP","CMNET"。

**179.使用TCP透传，如何使终端发送一条数据给服务器，服务器将这条数据解析成中文，并在数据流中显示？**

答：上传utf8编码的中文字符串即可。

**180.一个对象下如何创建多个实例呢？**

答：在addobject的时候，设置对应的参数就行。

**181.消息队列MQ可以从服务端往设备端发送数据吗？**

答：服务端调用API发，通过MQ不行。

**182.没有返回+MIPLDISCOVER是什么问题？**

答：自动发现资源按钮要打开。

**183.为什么设置了可读，结果在平台上看只有设备id是对的，读写权限、数值，数据类型都不对？**

答：不支持自定义让某个对象资源可读可行，平台有自己的规则，参考下IPSO规范的表格。

**184.请问OneNET平台支持modbus TCP吗？**

答：不支持modbus tcp，支持modbus和modbus rtu，modbus TCP也可以用tcp透传的方式，或者可以自行在tcp协议里自己写个解析脚本。

**185.AT+MIPLOPEN=0,86400 open的时候，规定的时间超时后，是不是需要重新observe discover？**

答：生命周期到期前，更新生命周期UPDATE。缓存命令下发，时间条件要满足，触发条件满足，设备在线，平台才会下发。

**186.TCP协议，需要发怎样的指令设备才能立即离线？**

答：断开socket就离线了。

**187.收到NB发的数据后能不能设置自动回复数据到设备，我用什么判断发送成功到平台了呢？**

答：NOTIFY指令有个ACKID，通过使用这个参数，平台回复，可以看下指令手册。

**188.发AT+CGATT?一直回复0，换了好几个模块都一样，是因为什么呢？**

答：没有附着上，试试AT+CGATT=1。

**189.现在OneNET平台下发命令有三种方式读、写、执行，请问这三种命令的区别是什么？什么情况下用哪种方式的命令？以及各命令的使用场景。**

答：读：OneNET发起读取之后，NBIOT设备会受到读取的命令，然后NBIOT设备回复读取命令，回复读取的命令会包含要读取的信息。<br/>
写：向NBIOT设备执行写操作，NBIOT设备会获取到相关写命令，然后取执行对应的操作。<br/>
执行：和写差不多，执行只能发string格式。

**190.请问添加群组推送的时候会进行URL验证吗？我是不是需要在服务器配置进行验证并返回，这样才能添加群组推送成功？**

答：你第一次配置推动地址的时候验证一次就行了，后续不用再验证URL可用性。具体可以参考官网HTTP推送的文档： [https://open.iot.10086.cn/doc/book/application-develop/httppush/introduce.html](https://note.youdao.com/)。

**191.请问OneNET的http推送post的数据没有csrf验证怎么弄，可以设置吗？**

答：只有关闭csrf的token验证。

**192.OneNET允许网络摄像头的接入吗？**

答：可以使用我们的视频网关直接接入。也可以自己根据sdk开发接入。

**193.SOTA还是只有LwM2M协议可以用吗？**

答：SOTA就是API验证、拉包的和EDP、MQTT、  LwM2M无关，但是底层是走TCP的。

**194.离线命令的失败重试次数中的失败，指的是下发失败 还是执行失败？**

答：指的是下发了，设备没正常响应。

**195.用LwM2M协议，设备往平台发送数据信息时，平台会自动重新更新lifetime吗？还是得发送Update报文才会更新？**

答：不会哦，只有发Update报文才会更新。

**196.设备的订阅状态为什么在离线之后就变成false？**

答：NB设备注册和离线时会删除订阅，如果 Update 报文中删除了资源，平台也会移除订阅。

**197.哪些协议支持离线命令？**

答：EDP、MQTT、NB-IoT。

**198.模块给服务器发送数据，服务器接收到会进行响应，但是在接收到数据之后返回send ok，首次发送的数据没有+CMRD信息，后续返回+CMRD信息都是上一次发送数据请求的应答不是本次，请问要想本次发送接收本次应答该怎么做？**

答：可以不使用+CMRD这样的方式去读取数据，服务器数据下来之后，通过串口主动返回。

**199.使用NB协议连接平台第一次上电走连接流程的时候数据可以正常在平台上面显示，但是在唤醒之后直接发数据，模组连接成功了，但是平台没有更新，看不到数据，是为什么？是否跟平台有关系？**

答：最好带上ackid，模组notify发出去返回的OK，是模组指令正确，不一定一定发送成功。

**200.群组管理的怎么用？**

答：目前文档中心没有相关介绍，但是开发者中心里可以进行相应操作，请先在“群组管理”添加群组，再在“数据推送”进行操作，把设备添加到同一个群组里面，让平台向第三方URL地址，推送这个群组里的设备数据流的数据即可。

**201.LwM2M协议obj_inst_id和res_id这两个id是指什么id啊？**

答：比如：AT+MIPLNOTIFY=0,0,3200,0,5750,1,3,"123",0,0。obj_inst_id为0，res_id为5750。

**202.LwM2M应用端不能查询所有设备吗？LwM2M应用端有没有接口一下能获取所有该产品下面的设备？**

答：入参要deviceid 。多个查询用,号隔开。

**203.订阅有什么用？**

答：平台subscribe订阅之后，模组publish消息的时候平台就能收到publish的消息。

**204.OneNET视频接入支持什么协议啊？**

答：RTMP推流、RTMPE加密推流。

**205.为什么固件升级总是失败？**

答：在论坛下载对应版本的固件和固件下载工具。 固件升级用串口，不是用stlink。

**206.请问在OneNET平台哪里设置res_id  ？**

答：这个不能设置，在IPS文档里面。

**207.请问NB一次最多能发送/接收多少数据？**

答：平台没做限制。很多模组限制的1000byte。具体限制多少字节需要问模组厂商,超过限制的长度，模组会分包的。

**208.调用创建设备接口，返回结果{"errno":6,"error":"invalid parameter: auth_info"}，怎么设置这个参数呢？**

答：可能是你的imei不符合规则，必须填写模组真实的imei号。

**209.添加完设备后 如何关联脚本呢？**

答：TCP设备上传第一包报文含有关联的脚本名称，进行关联，\*$PID#$AUTH_INFO#$PARSER_NAME\*。

**210.请问LwM2M协议，需要在OneNET上对终端实现observe后，终端执行notify，OneNET才能收到是吗？**

答：对，必须先完成相关对象的订阅，才可以往改对象进行notify。

**211.旧版本的MQTT协议最大支持多大的keepalive呢？**

答：1200秒。

**212.OneNET有没有日志服务？**

答：设备管理-日志查询，可以看日志。

**213.请问我们传入OneNET当中的数据如何能够和数据库进行对接呢？**

答：API或者推送。

**214.基于OneNET平台的基站定位服务需要对硬件做开发吗？**

答：不需要，基站定位即可。

**215.设备的在线状态与OneNET平台页面显示的在线状态不一致？**

答：这种情况可以让设备断电或断网后重新上线即可。

**216.OneNET平台打开设备列表后出现提示ip limit？**

答：查看权限管理的接口IP过滤器是否开启，若开启，关闭此功能。

**217.OneNET平台推送服务推送消息延时大？**

答：首先配置推送时，推送时间间隔设置越小，延时越小；另外若对消息延时要求较高，建议使用消息队列MQ。

**218.OneNET平台与应用平台关联后如何控制设备的状态，比如开关灯等操作？**

答：用对应协议的API下发命令即可。

**219.OneNET平台HTTP接入的设备为什么未显示在线状态？**

答：因为HTTP是短连接，设备上报数据后便断开连接，不会显示在线，若要使设备处于在线状态，可用其它长连接协议如MQTT。

**220.OneNET平台MQTT接入是否支持WebSocket的连接？**

答：暂不支持。

**221.OneNET平台MQTT接入下发内容的格式是什么，是否支持中文字符串？**

答：OneNET平台MQTT接入下发格式是十六进制，暂不支持中文字符串，支持十六进制字符串。


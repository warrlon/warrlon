# 资源模型

本章主要介绍OneNET Studio的资源模型。
<center>
    <img width="95%" style="box-shadow: 5px 5px 10px rgba(0,0,0,0.4);" 
    src="/images/iot_platform/application/平台资源模型.png">
    <br>
    图 1 平台资源模型
    <br>
</center>

用户资源包括产品、物模型、设备、项目及应用服务实例等类型资源，每种资源根据不同应用场景，使用限制有所差异。

- **产品**

    具有相同数据模型的一类设备集合，如海尔01冰箱，西门子A型开关，产品定义的物模型对产品下全部设备生效。

- **物模型**

    物模型是对同一类设备的数字化抽象描述，描述该类设备是什么，能做什么，能对外提供哪些服务，它包括属性、事件、服务三种功能类型。每个产品只能拥有一个物模型定义。
    
- **设备**
   
   设备为真实终端在平台的映射，真实终端连接平台时，需要在平台创建设备信息，建立终端与平台设备的一一对应关系，设备的物模型定义继承于产品的物模型定义。
   
- **项目**
  
   项目是应用开发的基础，可实现跨产品的资源整合及协同管理。项目可包含多个品类的设备资源，同时提供基于项目的应用服务能力。

- **数据推送**

   基于HTTP/HTTPS的推送服务，用于实现平台与应用的单向数据通信。使用推送服务需要创建推送实例，每个实例对应一个应用的服务推送配置，用于描述应用服务的推送地址、鉴权及数据传输方式。推送实例基于单个用户进行管理。

- **消息队列**

   具有低时延、高并发、高可用特点的消息通信中间件，可作为规则引擎的消息目的地，快速稳定地将项目数据推送至应用平台。使用消息队列服务需要创建队列实例、队列实体及消费订阅。消息队列基于单个用户进行管理。

- **应用API**
   
   应用API提供项目、设备、服务、增值能力等资源云端管理API，帮助快速构建应用。应用API可分为基于用户和项目两个纬度的使用方式，用户纬度用于设备生产需求，项目纬度主要用于应用开发。

- **规则引擎**
   
   规则引擎提供数据流转能力，可将项目下设备和应用数据进行过滤转换，推送至用户应用服务器。使用规则引擎需要创建流转规则，定义流转消息源、过滤规则及流转目的地。规则引擎流转规则基于单个项目进行管理。

- **场景联动**
   
   场景联动规则，支持设备数据、时间、天气等触发条件，联动设备命令下发或接口调用。使用场景联动服务，需要创建联动规则，定义场景的触发条件及执行动作。场景联动规则基于单个项目进行管理。

- **应用长连接**
   
   应用长连接是提供点对点通信的服务，可实现应用设备数据的实时获取和控制。应用长连接客户端只能订阅当前账号权限下的主题，主题层级精确到单个设备。可通过用户和项目两个纬度的进行使用。

### 资源使用限制

<table>
<tr><th width="15%">限制项</th><th width="70%">限制指标</th></tr>
<tr><td>设备数量</td><td>单产品下最多创建10万个设备，若有扩容需求可拨打4001-100-868转3申请</td></tr>
<tr><td>物模型功能点数量</td><td>单产品下最多创建100个物模型功能点</td></tr>
<tr><td>消息推送实例数量</td><td>单用户下最多创建10个推送实例</td></tr>
<tr><td>消息队列实例数量</td><td>单用户下最多创建10个消息队列</td></tr>
<tr><td>消息队列topic数量</td><td>单消息队列实例下最多创建5个topic</td></tr>
<tr><td>消息队列订阅数量</td><td>单topic中最多可创建5个订阅总数</td></tr>
<tr><td>API调用频率</td><td>单IP每秒限制100次接口调用</td></tr>
<tr><td>API数据大小限制</td><td>POST方式限制body大小为4M</td></tr>
<tr><td>API超时时间</td><td>超时时间10s</td></tr>
<tr><td>规则引擎规则数量</td><td>单项目下最多创建10个流转规则</td></tr>
<tr><td>历史数据查询</td><td>页面支持最多3个月的历史数据查询，一次查询时间最长为7天</td></tr>
<tr><td>数据追溯</td><td>历史数据备份最多保留一年</td></tr>
<tr><td>全链路日志</td><td>仅支持7天全链路日志查询</td></tr>
<tr><td>文件管理</td><td>单个账号仅支持最多1个G的文件存储看空间</td></tr>
<tr><td>文件存储时效</td><td>文件仅保留三个月</td></tr>
<tr><td>文件存储数量</td><td>单账户文件数量不超过1000个</td></tr>
</table>
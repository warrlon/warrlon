# NB-IoT常见问题-API相关
[本页目录]()

[1.如何设置Api超时时间（time_out）以及重试次数?](#16)

[2.write中参数mode=1与mode=2的区别？](#17)

[3.设备上线时，调用资源列表接口，为什么返回为空？](#18)

[4.平台下发命令内容的最大长度是多少？](#19)

[5.OneNET缓存下行指令是否有数量限制，最多缓存多少条？](#21)

[6.OneNet是否提供API，通过IMEI清空某台设备在OneNET上所有堆积的缓存指令？](#22)

[7.如何触发缓存命令？](#23)


<h3 id="15"><table><tr><td bgcolor=#F2F2F2>下行数据Api的使用</td></tr></table></h3>

<h4 id="16">1. 如何设置Api超时时间（time_out）以及重试次数?</h4>

答：超时时间默认设置为25s，可以通过Api设置该值，设置范围为5~40s。
> 示例：默认超时时间25s。

>>第一次下发超时（5~7.5s内没有收到回复），平台就会进行重试（这里的重试其实是coap协议的重试，是指在time_out周期内平台内部的重试）;

>>下次超时时间为第一次的2倍，因此第二次的重试时间为10s（假设第一次重试为5s）;第三次为20s。因此默认超时时间25s内，平台最多重试2次，一共下发三次。   

应用到设备的超时时间其实就是平台到设备的超时时间，因为应用到平台的正常通信时间基本可忽略不计。
上述过程的流程图如下：
 ![下行流程](/images/LwM2M/downdata.png)


<h4 id="17">2. write中参数mode=1与mode=2的区别？</h4>

答：区别在于：
* mode=1时，表示覆盖操作，会把之前的资源和值全部删掉，只保留当前写的资源和值。
* mode=2时，表示更新操作，重置或者新增写的资源，会保留之前的资源和值。

<h4 id="18">3. 设备上线时，调用资源列表接口，为什么返回为空？</h4>

答：平台下发discover时，会清空缓存的资源列表，等待设备回复后，可继续正常调用。

<h4 id="19">4. 平台下发命令内容的最大长度是多少？</h4>

答：目前限制在2Kb。

<h3 id="15"><table><tr><td bgcolor=#F2F2F2>缓存命令</td></tr></table></h3>

<h4 id="21">5. OneNET缓存下行指令是否有数量限制，最多缓存多少条？</h4>

答：目前是限制10条。

<h4 id="22">6. OneNet是否提供API，通过IMEI清空某台设备在OneNET上所有堆积的缓存指令？</h4>

答：目前只能通过uuid进行删除。

<h4 id="23">7. 如何触发缓存命令？</h4>

答：缓存命令的触发条件是有上行消息到达。
> 例如注册、更新、notify，目前已经可以设置触发缓存命令的上行命令类型。

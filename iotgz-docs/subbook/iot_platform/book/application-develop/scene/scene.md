# 场景联动

<a href="#1">1. 联动规则创建</a> 

<a href="#1">2. 联动规则日志</a>  

---

场景联动是一种开发自动化业务逻辑的编程方式，支持以设备数据、时间周期、第三方平台数据作为触发条件，当项目数据满足预设条件时，由系统自动执行预定义的业务逻辑，实现对设备的联动控制。

<h3 id="1">1.联动规则创建</h3>

场景联动页面，点击「添加规则」，填写规则名称及规则描述，点击「添加」完成场景规则创建，如图1所示。

<center>
    <img width="95%" style="box-shadow: 5px 5px 10px rgba(0,0,0,0.4);" 
    src="/images/iot_platform/application/场景联动_规则列表.png">
    <br>
    图 1 场景联动列表
    <br>
</center>

联动规则创建成功后，需要配置规则的业务逻辑。点击规则列表「编辑规则」，进入规则详情页面，设置规则的触发条件及执行动作，如图2所示。

<center>
    <img width="95%" style="box-shadow: 5px 5px 10px rgba(0,0,0,0.4);" 
    src="/images/iot_platform/application/场景联动_编辑规则.png">
    <br>
    图 2 联动规则编辑
    <br>
</center>

- 触发条件支持设备数据、设备状态、定时触发及第三方数据4种触发方式，单个规则最多设置5个触发条件，其设置步骤为:

<table>
<tr><th width="20%">触发条件名称</th><th>说明</th><th>设置步骤</th></tr>
<tr><td>设备数据</td><td>以设备功能点数据作为触发条件，当功能上报值和预设值满足关系运算时作为触发条件。</td><td>选择产品->选择设备->选择功能点->设置关系运算->填写预设值</td></tr>
<tr><td>设备状态</td><td>以设备状态上下线状态切换作为触发条件</td><td>选择产品->选择设备->选择状态（离线/在线）</td></tr>
<tr><td>定时触发</td><td>以固定的时间点及重复周期作为触发条件</td><td>选择时间点->选择重复周期</td></tr>
<tr><td>第三方数据触发</td><td>以第三方数据源（天气、温度等）作为触发条件，满足某一类别设定值时作为触发条件</td><td>选择数据源类别->选择区域信息->选择设定值</td></tr>
</table>

- 执行动作是指条件触发时，需要执行的具体操作，执行动作包括设备执行、API执行两类，单个规则最多设置5个执行动作，其设置步骤为:

<table>
<tr><th width="20%">执行动作类别</th><th>说明</th><th>设置步骤</th></tr>
<tr><td>设备执行</td><td>以设置设备属性功能点作为执行动作</td><td>选择产品->选择设备->选择功能点->填写属性功能设置值</td></tr>
<tr><td>API执行</td><td>以API调用作为执行动作</td><td>填写接收触发日志的API服务地址</td></tr>
</table>

<h3 id="2">2.联动规则日志</h3>

联动规则列表点击「查询日志」，可查看每条规则的执行状态及详细触发日志，如图3所示。

<center>
    <img width="95%" style="box-shadow: 5px 5px 10px rgba(0,0,0,0.4);" 
    src="/images/iot_platform/application/场景联动_触发日志.png">
    <br>
    图 3 联动日志查询
    <br>
</center>
# 常见问题

### 消息队列中的 topic 和 订阅（sub） 的关系是什么？
A：topic为队列实体，可以理解成一个缓存数据的仓库，只有数据超时或者仓库满之后，才会丢弃数据；而 sub 可以理解为是消息代理，sub 负责从仓库中复制数据的**副本**并发送给已经通过 MQTT 建立了订阅关系的客户端

### 客户端因为异常断开连接后，重连之后为何接收不到数据？
A：服务支持用户通过 MQTT 协议连接并消费数据，客户端订阅之后方才能接收到消息，目前由于不支持 session，所以客户端的订阅关系系统不会保存，当客户端断开后，订阅关系会被清除，重新连接之后，需要重新建立订阅关系才能消费到数据

### 系统支持的TLS是单向认证还是双向认证？
A：系统支持TLS**单向认证**，提供下载的.pem证书用于客户端验证服务器的合法性；而服务器验证客户端的合法性是通过MQTT连接时 username 与 password 来进行的


## 计费常见问题

### 服务是否收费？
A：消息队列MQ作为物联网套件的增值服务，开通服务并不收取任何费用，开通服务后按照用户使用量进行收费，详情请见[产品定价](/book/price/rule.md)

### 每天扣除 2 元，这是什么费用？
A：消息队列 MQ 费用由 **消息处理费** 和 **topic使用费** 组成。每个topic资源占用费为 2 元/天。如您 MQ 服务实例下存在不再使用的topic，请及时进行删除，避免产生不必要的费用。

### 我昨天删除了 topic，为什么今天会收到账单并被扣费？

A：消息队列MQ服务 **topic使用费** 以每天 00:00-23:59:59 为周期进行计费，第二天完成扣费。所以，昨天删除 topic，昨天的topic费用已经产生，今天会出账单进行扣费，明天就不会出账单产生扣费。

### 我没有使用 消息队列MQ 服务，为什么会扣费？
A：请前往 **费用中心-消费明细** 查看账单，检查您是否有使用消息队列MQ服务。如您存在不再使用的topic，请及时进行删除，避免再次扣费。

### 我有收到 消息队列MQ 的扣费，但是在控制台上看到没有开通 消息队列MQ 服务？
A：若欠费状态超过7天，OneNET 将释放处于欠费状态的服务实例，即您无法访问到已被释放的 消息队列MQ 服务实例。但是重新使用服务时，您的 消息队列MQ 服务资源被释放之前的欠费仍然需要结清。

### 如何停用 消息队列MQ 服务？
A：若您不再使用消息队列MQ，请及时前往 消息队列MQ 控制台删除所有不再使用的服务实例及topic，避免产生不必要的费用。具体操作如下图所示：

用户可通过开发者中心 **消息队列MQ** 进入MQ服务
![](/images/mq/MQ入口.png)

点击 **同意服务协议**（此步不会产生任何费用，如无此步请忽略）
![](/images/mq/MQ服务协议.png)

点击 **删除**，删除所有不再使用的实例，确保无topic占用后，即不会产生费用
![](/images/mq/删除MQ服务实例.png)

### 充值后如何启用 消息队列MQ 服务？

A：在您完成充值后，请前往 **规则引擎** 确保相应规则的 **启用状态** 为 **开启**，避免消息无法流转到 消息队列MQ 服务。以NB-IoT物联网套件为例，具体操作如下图所示:
![](/images/mq/开启规则引擎.png)

### 如何获取更多帮助？
A：在使用过程中有任何问题，请加入技术支持QQ群：626384429

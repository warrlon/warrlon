# 消息队列 MQ 计费规则

<table><tr><td bgcolor=#F2F2F2>
为回馈广大OneNET用户，消息队列MQ推出新老用户限免活动，详情请见<a href="https://open.iot.10086.cn/iotbox/information/detail?id=332">活动详情</a>
</tr></td></table>

## 计费说明
- 付费方式

    消息队列 MQ 为后付费产品，开通服务后，周期性按照服务用量进行费用结算

- 费用组成

    OneNET 消息队列 MQ 的费用主要由 **消息处理费** 与 **topic使用费** 两部分组成

## 消息处理费

用户开通服务实例后，OneNET 将对单个服务实例中 **每日** 内消息处理条数进行统计，并依据单价 **1.2元/百万条消息**，**每日0点进行结算**，费用精确到小数点后两位

> 其中：
> - 消息处理总量计算规则为：消息处理总条数 = 生产消息条数 + 消费消息条数   
> 
> - 单个消息体的条数计量方式： 单条消息体大小/1KB，向上取整
>
>     计算示例1：生产1次消息，消息体大小1.5KB，消息被消费1次，消息条数为 2 + 2 = 4 条  
>     计算示例2，生产1次消息，消息体大小0.5KB，消息被消费2次，消息条数为 1 + 2 = 3 条

#### 计费示例

- 2018年9月20日 00:00 - 2018年9月21日 00:00，用户服务实例中总计处理了 3,514,540 条消息，则该日费用为 3,514,540 / 1,000,000 * 1.20 = 4.21 元
- 2018年9月21日 00:00 - 2018年9月22日 00:00，用户服务实例中总计处理了 140,987 条消息，则该日费用为 140,987 / 1,000,000 * 1.20 = 0.16 元

#### 免费说明

每个服务实例**每月**前 2000万 条消息免费使用


## topic使用费

用户在服务实例中创建 topic 后，OneNET 将对服务实例中 **每日** topic个数进行统计，并依据单价 2元/个·日，**每日进行结算**

topic使用费计算公式为：

    某日topic使用费 = ( 当日0点topic个数 + 当日内新增的topic个数 ) * 单价(2元/个·日)

> **提醒**： 
>  
> 请勿测试性创建大量临时topic，以免产生大量不必要的费用  
> 请及时删除不再使用的topic，以免产生不必要的周期性费用


#### 计费示例

- 2018年9月20日，用户在服务实例中创建了1个topic，则从2018年9月21日 00:00开始，每日00:00 产生2元的topic使用费
- 2018年9月21日，用户的服务实例中已有1个topic，当日创建了1个topic，则从2018年9月22日 00:00开始，每日00:00 产生 4 元的topic使用费


## 出账说明

OneNET 消息队列MQ每日0点出一次账单，费用将自动从账户余额中扣除

## 欠费说明
- 账户欠费后，OneNET将暂停您的消息队列服务，服务停用时间为每日17：30，按照topic使用费计算规则，启动停用当天topic依然会计费生成账单，停用第二天开始topic不再计费
- 服务停用期间，您的服务实例将不再接收消息生产，同时客户端也无法进行消息消费
- 若欠费状态超过7天，OneNET 将释放处于欠费状态的服务实例，未处理的消息将自动释放，被释放的资源以及消息均不可恢复，重新使用服务时需结清资源被释放之前的欠费
- 新用户开通MQ服务时，若选择15天免费试用期到期后继续付费使用，则在15天到期后正常生成账单；若选择15天免费试用期到期后立即停用，则到期当日0点1分停用消息队列服务，不会产生账单


## 退订说明
- 消息队列MQ为后付费产品，用户无使用需求时，访问MQ控制台**删除服务实例，确保无topic占用后**将不再产生任何费用，如有使用需求，再次创建服务实例及topic即可。
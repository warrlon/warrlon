# 应用管理

边缘IoT管理支持下发容器应用到边缘节点，您可以下发如下两类容器应用。

- 边缘市场中的边缘应用。具体方法请参见**边缘市场**。
- 自定义边缘应用。本节主要介绍如何创建自己的容器镜像。

## 容器应用

容器应用：指的是您已安装的容器应用。

从左侧**应用管理**进入，点击**容器应用**子菜单，进入我的容器应用。

### 创建容器应用

点击**创建容器**应用，会进入创建详情页，如图：

![](/images\oes\ecp\应用管理-创建容器详情.png)

填写必要的信息，带“*”号为必填，其中：

部署对象：选择将要部署的目标边缘节点。

关联模板：用户有两种方式填写部署的参数：

1）选择关联已有的模板导入配置参数，详见**应用模板**。

2）手动填写配置参数。

填写完必要的信息后点击**创建**：

![](/images\oes\ecp\容器应用列表.png)

可以在此页面进行删除，查看详情。更改配置等操作。

## 应用模板

容器应用模板用于定义用户的边缘应用，用户需要指定容器应用的容器镜像、配置信息、磁盘挂载信息以及资源占用信息。

应用需要基于镜像创建，用户首先需要先制作镜像并上传至镜像仓库。

点击**应用模板**子菜单，进入我的容器应用：

### 创建模板

点击右上角，输入完最基本信息后，点击创建：

![](/images\oes\ecp\应用管理-输入应用模板信息.png)

**运行命令**：

Docker 镜像拥有存储镜像信息的相关元数据，如果不设置生命周期命令和参数，容器运行时会运行镜像制作时提供的默认的命令和参数，Docker 原生定义字段为 CMD 。

如果在创建工作负载时填写了容器的运行命令和参数，将会覆盖镜像构建时的默认命令 " CMD "。

**启动命令** ：

![](/images\oes\ecp\应用管理-命令配置.png)

![](/images\oes\ecp\应用管理-命令配置2.png)

输入可执行的命令，例如“/run/start”。

若可执行命令有多个，多个命令之间用换行进行分隔。若命令本身带空格，则需要加引号（""）。

```
说明：多命令时，运行命令建议用/bin/sh或其他的shell，其他全部命令作为参数来传入。
```

**运行参数**：

输入控制容器运行命令参数，例如--port=8080。

若参数有多个，多个参数以换行分隔。

**选项配置**

![](/images\oes\ecp\应用管理-选项配置.png)

可以通过勾选“启用特权选项”，使容器拥有root权限，可以访问主机上的设备（如GPU、FPGA）。

**环境变量**

![](/images\oes\ecp\应用管理-环境变量.png)

容器运行环境中设定的一个变量。当前支持手动输入和变量引用方式。

手动输入支持自定义变量名称和变量值。

```
说明：ECP平台不会对用户输入的环境变量进行加密。
如果用户配置的环境变量涉及敏感信息，用户需要自行加密后再填入，并在应用中自己完成解密过程。
ECP平台服务不提供任何加解密工具，如果您需要设置加密密文，可以使用其他平台的加解密工具。
```

**卷配置**

![](/images\oes\ecp\应用管理-卷配置.png)

容器可以将本地卷挂载到容器中，以实现数据文件的持久化存储。

```
说明：
- 请不要挂载在系统目录下，如“**/**”、“**/var/run”**等，会导致容器异常。建议挂载在空目录下，若目录不为空，请确保目录下无影响容器启动的文件，否则文件会被替换，导致容器启动异常，应用创建失败。
- 挂载高危目录的情况下 ，建议使用低权限账号启动，否则可能会造成宿主机高危文件被破坏。
```

**健康检查**：

![](/images\oes\ecp\应用管理-健康检查.png)

健康检查是指容器运行过程中根据用户需要定时检查容器健康状况或是容器中负载的健康状况。

- 应用存活探针：应用存活探针用于探测容器是否正常工作，不正常则重启实例。

创建完毕后可以在页面看到模板列表：

![](/images\oes\ecp\应用管理-模版列表.png)

可以进行查看详情、编辑、删除操作。


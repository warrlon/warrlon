# 数据转发到消息队列MQ

## 概述
规则引擎支持用户自定义配置规则将设备消息处理后转发至 **消息队列MQ**，提供高性能、高可用的消息中间件服务，方便应用服务器稳定高效获取设备消息。

规则引擎将消息转发至消息队列示意图如下：
![](/images/rule-engine/规则引擎转发至MQ.jpg)
## 准备条件
在设置消息目的地之前，您需要：
- 完成规则引擎控制台配置，创建规则和编写用于筛选转发数据的SQL。
- 开通消息队列MQ服务，创建服务实例，添加Topic和订阅。具体使用方法可参考 [消息队列](https://open.iot.10086.cn/doc/mq/)。

## 操作步骤

1. 在规则引擎配置界面，点击 **消息目的地**，在弹出的下拉列表中选择 **消息队列** 。
![](/images/rule-engine/MQ消息目的地.png)

2. 在弹出的 **选择实例**，**选择Topic** 列表，选择您已在消息队列服务中配置好的实例和Topic。
![](/images/rule-engine/规则引擎MQ配置.png)

3. 点击完成，实现规则引擎转发到消息队列MQ。OneNET平台默认创建规则后即启用，您可根据需求选择启用或禁用。
![](/images/rule-engine/规则引擎转发到MQ.png)
4. 进行测试。通过设备上报数据至OneNET平台，然后在消息队列MQ控制台，查看是否成功接收到消息。